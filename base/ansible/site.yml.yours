---
- name: Setting up basical Amazon Web Services
  hosts: localhost
  connection: local
  gather_facts: False
  roles:
    - iam
    - ec2
  tasks:
    - name: Refresh inventory
      meta: refresh_inventory

- name: Building application host
  hosts: tag_Name_<<ec2 name as filter>>
  user: ec2-user
  become: True
  gather_facts: true
  roles:
    - yum
    - java11
    - aws-cli
    - code-deploy
